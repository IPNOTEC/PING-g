<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPNOTEC PINGG | FUTURE COMMUNICATION INTERFACE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:wght@300;400;500;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            /* NEON Color Palette */
            --neon-violet: #9d00ff;
            --neon-indigo: #5d00ff;
            --neon-blue: #00a2ff;
            --neon-cyan: #00ffea;
            --neon-green: #00ff9d;
            --neon-yellow: #fff000;
            --neon-orange: #ff5d00;
            --neon-red: #ff0000;
            --neon-pink: #ff00cc;
            --neon-white: #ffffff;
            
            /* UI Colors - More Transparent */
            --bg-color: #000000;
            --device-glass: rgba(0, 0, 0, 0.7);
            --glass-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-neon: #00ffea;
            --text-transparent: rgba(255, 255, 255, 0.8);
            
            /* Effects */
            --neon-glow: 0 0 20px;
            --glass-blur: blur(25px);
            --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Key States */
            --key-glass: rgba(40, 40, 60, 0.6);
            --key-pressed: rgba(100, 100, 255, 0.4);
            
            /* Grey shades for dots */
            --grey-1: #000000;
            --grey-2: #333333;
            --grey-3: #666666;
            --grey-4: #999999;
            --grey-5: #cccccc;
            --grey-6: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none;
            font-family: 'Exo 2', sans-serif;
        }

        body {
            background: var(--bg-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
            position: relative;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(157, 0, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(0, 255, 234, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 40% 80%, rgba(255, 93, 0, 0.1) 0%, transparent 20%);
        }

        /* Main Device Frame - BLACK NEON PHONE */
        .ping-device {
            width: 440px;
            height: 850px;
            background: var(--device-glass);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border-radius: 0; /* SQUARE CORNERS */
            position: relative;
            box-shadow: 
                0 0 0 1px rgba(255, 255, 255, 0.05),
                0 30px 60px rgba(0, 0, 0, 0.9),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 0 30px rgba(0, 0, 0, 0.8);
            border: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: var(--transition-smooth);
            z-index: 1;
        }

        /* Left Vertical Color Bar - RECTANGULAR */
        .vertical-color-bar {
            position: absolute;
            left: 0;
            top: 60px;
            bottom: 100px;
            width: 8px;
            display: flex;
            flex-direction: column;
            gap: 1px;
            padding: 0;
            z-index: 5;
            border-radius: 0;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
        }

        .color-segment {
            flex: 1;
            width: 100%;
            opacity: 0.2;
            transition: all 0.2s ease;
            border-radius: 0; /* SQUARE */
            position: relative;
            border: none;
        }

        .color-segment.active {
            opacity: 1;
            box-shadow: 0 0 15px currentColor;
        }

        /* Top Status Bar - More Transparent */
        .status-bar {
            height: 50px;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            z-index: 10;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* Three Dots Indicator - SQUARE with grey shades */
        .three-dots-indicator {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 0; /* SQUARE */
            position: relative;
        }

        .status-dot:nth-child(1) {
            background: var(--grey-1);
            animation: dotPulseGrey1 1s infinite;
        }

        .status-dot:nth-child(2) {
            background: var(--grey-3);
            animation: dotPulseGrey3 1s infinite 0.3s;
        }

        .status-dot:nth-child(3) {
            background: var(--grey-6);
            animation: dotPulseGrey6 1s infinite 0.6s;
        }

        @keyframes dotPulseGrey1 {
            0%, 100% { 
                opacity: 0.4;
                box-shadow: 0 0 5px var(--grey-1);
            }
            50% { 
                opacity: 1;
                box-shadow: 0 0 20px var(--grey-1);
            }
        }

        @keyframes dotPulseGrey3 {
            0%, 100% { 
                opacity: 0.4;
                box-shadow: 0 0 5px var(--grey-3);
            }
            50% { 
                opacity: 1;
                box-shadow: 0 0 20px var(--grey-3);
            }
        }

        @keyframes dotPulseGrey6 {
            0%, 100% { 
                opacity: 0.4;
                box-shadow: 0 0 5px var(--grey-6);
            }
            50% { 
                opacity: 1;
                box-shadow: 0 0 20px var(--grey-6);
            }
        }

        /* Custom header with flipped G - More Transparent */
        .branding {
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            font-weight: 900;
            letter-spacing: 3px;
            background: linear-gradient(90deg, var(--neon-green), var(--neon-violet), var(--neon-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(0, 255, 234, 0.3);
            position: relative;
            display: inline-block;
            opacity: 0.9;
        }

        .flipped-g {
            display: inline-block;
            transform: rotateY(180deg);
            background: linear-gradient(90deg, var(--neon-orange), var(--neon-violet));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .top-right-orange {
            position: absolute;
            right: 15px;
            top: 15px;
            width: 8px;
            height: 8px;
            background: var(--neon-orange);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--neon-orange);
            animation: orangePulse 1.5s infinite;
            opacity: 0.8;
        }

        @keyframes orangePulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Top Color Strip - RECTANGULAR */
        .top-color-strip {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: var(--neon-orange);
            border-radius: 0;
            box-shadow: 0 0 15px var(--neon-orange);
            transition: all 0.5s ease;
            z-index: 11;
            opacity: 0.8;
        }

        /* Screen Area - RECTANGULAR */
        .screen-area {
            flex: 1;
            background: rgba(0, 0, 0, 0.4);
            margin: 10px;
            border-radius: 0; /* SQUARE */
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        /* Chat Interface */
        .chat-interface {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* Chat Header - More Transparent */
        .chat-header {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            z-index: 1;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .chat-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 5px;
            opacity: 0.9;
        }

        .chat-subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            color: var(--text-neon);
            text-align: center;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
            z-index: 1;
        }

        .message {
            max-width: 85%;
            padding: 10px 12px;
            border-radius: 0; /* SQUARE */
            position: relative;
            animation: messageSlide 0.2s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            font-size: 12px;
            line-height: 1.4;
            word-wrap: break-word;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid;
            opacity: 0.95;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.95);
            }
            to {
                opacity: 0.95;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            align-self: flex-end;
            background: rgba(0, 162, 255, 0.1);
            border-color: rgba(0, 255, 234, 0.2);
            color: var(--neon-cyan);
        }

        .message.bot {
            align-self: flex-start;
            background: rgba(20, 20, 40, 0.3);
            border-color: rgba(157, 0, 255, 0.2);
            color: var(--text-primary);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            font-size: 9px;
        }

        .message-sender {
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 10px;
            letter-spacing: 1px;
        }

        .sender-color {
            width: 8px;
            height: 8px;
            border-radius: 0; /* SQUARE */
            display: inline-block;
            box-shadow: 0 0 5px currentColor;
        }

        .message-time {
            font-family: 'Share Tech Mono', monospace;
            opacity: 0.7;
            font-size: 8px;
            color: var(--text-secondary);
        }

        /* Chat Input */
        .chat-input-container {
            padding: 8px 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            gap: 8px;
            z-index: 1;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .message-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(0, 255, 234, 0.15);
            border-radius: 0; /* SQUARE */
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 12px;
            outline: none;
            font-family: 'Exo 2', sans-serif;
            transition: var(--transition-fast);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .message-input:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--neon-cyan);
            box-shadow: 0 0 10px rgba(0, 255, 234, 0.2);
        }

        .send-button {
            width: 36px;
            height: 36px;
            border-radius: 0; /* SQUARE */
            background: rgba(0, 255, 234, 0.1);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-fast);
            font-size: 14px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .send-button:hover {
            background: var(--neon-cyan);
            color: black;
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        /* Node Selection Screen */
        .ping-startup-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.5s ease;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .ping-logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 36px;
            font-weight: 900;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-violet), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-align: center;
            letter-spacing: 6px;
            text-transform: uppercase;
            animation: pingGlow 2s infinite;
            opacity: 0.9;
        }

        @keyframes pingGlow {
            0%, 100% { text-shadow: 0 0 20px rgba(0, 255, 234, 0.3); }
            50% { text-shadow: 0 0 40px rgba(157, 0, 255, 0.5); }
        }

        .ping-subtitle {
            font-family: 'Share Tech Mono', monospace;
            font-size: 12px;
            color: var(--text-neon);
            letter-spacing: 2px;
            margin-bottom: 40px;
            text-transform: uppercase;
            opacity: 0.8;
        }

        .node-selection-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            color: var(--text-primary);
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
            opacity: 0.9;
        }

        .node-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            width: 260px;
            margin-bottom: 30px;
        }

        .node-option {
            width: 40px;
            height: 40px;
            border-radius: 0; /* SQUARE */
            cursor: pointer;
            border: 1px solid transparent;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 14px;
            color: white;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .node-option:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px currentColor;
        }

        .node-option.selected {
            border-color: white;
            box-shadow: 0 0 20px white;
            animation: nodePulse 1.5s infinite;
        }

        @keyframes nodePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .node-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 7px;
            position: absolute;
            bottom: -16px;
            color: var(--text-secondary);
            width: 100%;
            text-align: center;
            opacity: 0.8;
        }

        /* RECTANGULAR Keypad */
        .keypad-container {
            height: 220px;
            background: rgba(0, 0, 0, 0.3);
            margin: 8px;
            border-radius: 0; /* SQUARE */
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: grid;
            grid-template-rows: repeat(4, 1fr);
            grid-template-columns: repeat(10, 1fr);
            gap: 3px;
            padding: 8px;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        /* Key Styles - RECTANGULAR */
        .key {
            background: var(--key-glass);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 0; /* SQUARE */
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            opacity: 0.9;
        }

        .key:active {
            background: var(--key-pressed);
            transform: scale(0.92);
        }

        .key.space {
            grid-column: span 3;
        }

        .key.enter {
            background: rgba(0, 162, 255, 0.15);
            color: var(--neon-cyan);
            font-weight: 700;
            border-color: rgba(0, 255, 234, 0.2);
        }

        .key.backspace {
            background: rgba(255, 0, 0, 0.15);
            color: var(--neon-red);
            border-color: rgba(255, 0, 0, 0.2);
        }

        /* Key Lighting Logic */
        .key.lit {
            box-shadow: 0 0 10px currentColor;
            border-color: currentColor;
            color: currentColor;
            background: rgba(0, 0, 0, 0.4);
        }

        /* Frame Glow Effect */
        .frame-glow {
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            border-radius: 0; /* SQUARE */
            background: transparent;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        /* Footer Control Panel - More Transparent */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        .control-button {
            padding: 6px 4px;
            background: rgba(40, 40, 60, 0.4);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'Orbitron', sans-serif;
            font-size: 9px;
            cursor: pointer;
            transition: var(--transition-fast);
            border-radius: 0; /* SQUARE */
            letter-spacing: 1px;
            text-align: center;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            opacity: 0.9;
        }

        .control-button:hover {
            background: rgba(0, 255, 234, 0.3);
            color: white;
            box-shadow: 0 0 8px var(--neon-cyan);
        }

        .control-button.active {
            background: rgba(0, 255, 234, 0.4);
            color: black;
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        /* Sound Wave Indicator */
        .sound-wave {
            position: absolute;
            bottom: 5px;
            right: 5px;
            width: 20px;
            height: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sound-wave.active {
            opacity: 0.7;
        }

        .sound-bar {
            width: 2px;
            background: var(--neon-cyan);
            border-radius: 1px;
            animation: soundWave 0.5s infinite ease-in-out;
        }

        .sound-bar:nth-child(1) { height: 3px; animation-delay: 0s; }
        .sound-bar:nth-child(2) { height: 6px; animation-delay: 0.1s; }
        .sound-bar:nth-child(3) { height: 9px; animation-delay: 0.2s; }
        .sound-bar:nth-child(4) { height: 6px; animation-delay: 0.3s; }
        .sound-bar:nth-child(5) { height: 3px; animation-delay: 0.4s; }

        @keyframes soundWave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }

        /* Edge Indicator */
        .edge-indicator {
            position: absolute;
            left: 0;
            top: 60px;
            width: 8px;
            height: 40px;
            z-index: 5;
            opacity: 0;
            transition: opacity 0.2s ease;
            box-shadow: 0 0 10px currentColor;
        }

        /* Scrollbar */
        .chat-messages::-webkit-scrollbar {
            width: 4px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 0;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--neon-cyan), var(--neon-violet));
            border-radius: 0;
            opacity: 0.7;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .ping-device {
                width: 95vw;
                height: 90vh;
            }
            
            .keypad-container {
                height: 180px;
                gap: 2px;
                padding: 6px;
            }
            
            .key {
                font-size: 10px;
            }
            
            .node-grid {
                width: 90%;
                gap: 8px;
            }
            
            .node-option {
                width: 35px;
                height: 35px;
                font-size: 12px;
            }
            
            .control-button {
                font-size: 8px;
                padding: 5px 2px;
            }
            
            .ping-logo {
                font-size: 28px;
            }
        }
        
        /* Loading animation for faster messages */
        @keyframes fastPulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .fast-pulse {
            animation: fastPulse 0.5s infinite;
        }
    </style>
</head>
<body>
    <!-- Main Device -->
    <div class="ping-device" id="deviceFrame">
        <!-- Left Vertical Color Bar -->
        <div class="vertical-color-bar" id="verticalColorBar">
            <!-- Color segments will be added dynamically -->
        </div>

        <!-- Edge Indicator -->
        <div class="edge-indicator" id="edgeIndicator"></div>

        <!-- Top Color Strip -->
        <div class="top-color-strip" id="topColorStrip"></div>

        <!-- Frame Glow -->
        <div class="frame-glow" id="frameGlow"></div>

        <!-- Sound Wave Indicator -->
        <div class="sound-wave" id="soundWave">
            <div class="sound-bar"></div>
            <div class="sound-bar"></div>
            <div class="sound-bar"></div>
            <div class="sound-bar"></div>
            <div class="sound-bar"></div>
        </div>

        <!-- Status Bar with Header -->
        <div class="status-bar">
            <div class="three-dots-indicator">
                <div class="status-dot"></div>
                <div class="status-dot"></div>
                <div class="status-dot"></div>
            </div>
            <div class="branding" id="deviceBranding">
                IPNOTEC PING<span class="flipped-g">G</span>
            </div>
            <div class="top-right-orange"></div>
        </div>

        <!-- Screen Area -->
        <div class="screen-area">
            <!-- Node Selection Screen -->
            <div class="ping-startup-screen" id="pingStartupScreen">
                <div class="ping-logo">IPNOTEC PINGG</div>
                <div class="ping-subtitle">FUTURE COMMUNICATION NETWORK</div>
                <div class="node-selection-title">SELECT YOUR NODE COLOR</div>
                <div class="node-grid" id="nodeGrid">
                    <!-- Node options will be added dynamically -->
                </div>
                <button class="send-button" id="confirmNodeButton" onclick="confirmNodeSelection()" style="width: 200px; height: 36px; font-size: 11px;">
                    <i class="fas fa-plug"></i> CONNECT TO NETWORK
                </button>
            </div>

            <!-- Chat Interface -->
            <div class="chat-interface" id="chatInterface">
                <!-- Chat Header -->
                <div class="chat-header">
                    <div class="chat-title">IPNOTEC FUTURE NETWORK</div>
                    <div class="chat-subtitle">NODE: <span id="currentUserNode">CYAN</span> â€¢ SYSTEM: <span id="systemStatus">ONLINE</span></div>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be added here dynamically -->
                </div>

                <!-- Chat Input -->
                <div class="chat-input-container">
                    <input type="text" class="message-input" id="messageInput" placeholder="Type your message..." />
                    <button class="send-button" id="sendButton">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- RECTANGULAR Keypad -->
        <div class="keypad-container" id="keypad">
            <!-- First Row -->
            <div class="key key-1">1</div>
            <div class="key key-2">2</div>
            <div class="key key-3">3</div>
            <div class="key key-4">4</div>
            <div class="key key-5">5</div>
            <div class="key key-6">6</div>
            <div class="key key-7">7</div>
            <div class="key key-8">8</div>
            <div class="key key-9">9</div>
            <div class="key key-0">0</div>

            <!-- Second Row -->
            <div class="key key-q">Q</div>
            <div class="key key-w">W</div>
            <div class="key key-e">E</div>
            <div class="key key-r">R</div>
            <div class="key key-t">T</div>
            <div class="key key-y">Y</div>
            <div class="key key-u">U</div>
            <div class="key key-i">I</div>
            <div class="key key-o">O</div>
            <div class="key key-p">P</div>

            <!-- Third Row -->
            <div class="key key-a">A</div>
            <div class="key key-s">S</div>
            <div class="key key-d">D</div>
            <div class="key key-f">F</div>
            <div class="key key-g">G</div>
            <div class="key key-h">H</div>
            <div class="key key-j">J</div>
            <div class="key key-k">K</div>
            <div class="key key-l">L</div>

            <!-- Fourth Row -->
            <div class="key key-shift special">SHIFT</div>
            <div class="key key-z">Z</div>
            <div class="key key-x">X</div>
            <div class="key key-c">C</div>
            <div class="key key-v">V</div>
            <div class="key key-b">B</div>
            <div class="key key-n">N</div>
            <div class="key key-m">M</div>
            <div class="key key-backspace special"><i class="fas fa-backspace"></i></div>

            <!-- Fifth Row -->
            <div class="key key-symbols special">?123</div>
            <div class="key key-mic special"><i class="fas fa-microphone"></i></div>
            <div class="key key-space space">SPACE</div>
            <div class="key key-comma special">,</div>
            <div class="key key-period special">.</div>
            <div class="key key-enter enter">ENTER</div>
        </div>

        <!-- Footer Control Panel -->
        <div class="control-panel">
            <button class="control-button" onclick="sendPing()">
                SEND PING
            </button>
            <button class="control-button" onclick="clearChat()">
                CLEAR LOG
            </button>
            <button class="control-button" onclick="randomizeColors()">
                RANDOMIZE
            </button>
            <button class="control-button" id="toggleKeypadLighting" onclick="toggleKeypadLighting()">
                KEYLIGHTS OFF
            </button>
            <button class="control-button" id="toggleAnimation" onclick="toggleAnimation()">
                ANIMATION ON
            </button>
            <button class="control-button" id="toggleSound" onclick="toggleSound()">
                SOUND OFF
            </button>
        </div>
    </div>

    <script>
        // App State - 3X FASTER
        let userNodeColor = 'cyan';
        let userNodeName = 'CYAN EXPLORER';
        let isSystemOnline = true;
        let keypadLighting = false;
        let animationsEnabled = true;
        let soundEnabled = false;
        let activeFrameGlow = null;
        let verticalBarAnimation = null;
        let currentColorIndex = 0;
        let lastSenderKey = null;
        let lastSenderColor = null;
        let messageCount = 0;
        
        // Audio Context for Futuristic Sounds
        let audioContext = null;
        let soundWaveElement = null;
        
        // Color Configuration
        const colorConfig = [
            { id: 'violet', hex: '#9d00ff', name: 'VIOLET' },
            { id: 'indigo', hex: '#5d00ff', name: 'INDIGO' },
            { id: 'blue', hex: '#00a2ff', name: 'BLUE' },
            { id: 'cyan', hex: '#00ffea', name: 'CYAN' },
            { id: 'green', hex: '#00ff9d', name: 'GREEN' },
            { id: 'yellow', hex: '#fff000', name: 'YELLOW' },
            { id: 'orange', hex: '#ff5d00', name: 'ORANGE' },
            { id: 'red', hex: '#ff0000', name: 'RED' },
            { id: 'pink', hex: '#ff00cc', name: 'PINK' },
            { id: 'white', hex: '#ffffff', name: 'WHITE' }
        ];
        
        // IPNOTEC Network Participants
        const networkParticipants = [
            { name: 'ipnotec', color: 'orange', role: 'Founder & Visionary' },
            { name: '1001', color: 'violet', role: 'Blockchain Architect' },
            { name: 'bharath', color: 'green', role: 'Wearable Tech Lead' },
            { name: 'quantum', color: 'cyan', role: 'Smart Systems AI' },
            { name: 'nova', color: 'blue', role: 'Sustainable Innovation' },
            { name: 'echo', color: 'yellow', role: 'Energy Systems' },
            { name: 'synth', color: 'pink', role: 'Entertainment Tech' },
            { name: 'core', color: 'red', role: 'Security & QNX Systems' },
            { name: 'neural', color: 'indigo', role: 'AI Research' },
            { name: 'pulse', color: 'white', role: 'Network Operations' }
        ];
        
        // EXPANDED IPNOTEC Chat Topics
        const ipnotecTopics = [
            "IPNOTEC is building the organization of the future - a phoneless, keyless, paperless ecosystem",
            "Our vision: A society where technology serves humanity, not the other way around",
            "IPNOTEC Watch: The first truly phoneless wearable with neural interface technology",
            "The BB QNX integration in IPNOTEC Watch provides military-grade security for @ipnotec.vip accounts",
            "Imagine a world without phones. IPNOTEC Watch projects holographic interfaces directly to your retina",
            "Neural-linked communication: Direct thought-to-text translation through IPNOTEC neural interfaces",
            "IPNOTEC biometic authentication: Your unique biological signature is your universal key",
            "IPNOTEC digital documentation: All contracts, IDs, and records secured on quantum-resistant blockchain",
            "IPNOTEC Studios: Creating the future of entertainment with adaptive neural-responsive media",
            "IPNOTEC internships awaken young generations to purposeful living through technology",
            "BB QNX provides military-grade security for IPNOTEC's entire ecosystem",
            "Quantum-resistant blockchain ensures our systems remain secure against future threats",
            "IPNOTEC coworking spaces: Global network of innovation hubs with holographic meeting rooms",
            "Container house revolution: IPNOTEC modular smart homes with full AI management systems",
            "IPNOTEC tokens enable fractional ownership of real estate and assets worldwide",
            "We're not just a company; we're building the infrastructure for humanity's next evolutionary step",
            "IPNOTEC represents the convergence of consciousness, creativity, and cutting-edge technology",
            "Our mission: Create technology that enhances human potential while preserving our humanity"
        ];
        
        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize vertical color bar
            initializeVerticalColorBar();
            
            // Initialize node selection grid
            initializeNodeGrid();
            
            // Get sound wave element
            soundWaveElement = document.getElementById('soundWave');
            
            // Setup event listeners
            document.getElementById('sendButton').addEventListener('click', sendMessage);
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Setup keypad listeners
            document.querySelectorAll('.key').forEach(key => {
                key.addEventListener('click', handleKeypadClick);
                key.addEventListener('mousedown', function() {
                    this.style.transform = 'scale(0.92)';
                    playKeySound();
                });
                key.addEventListener('mouseup', function() {
                    this.style.transform = 'scale(1)';
                });
                key.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // Start vertical bar animation (3X faster)
            startVerticalBarAnimation();
            
            // Start periodic bot messages (3X faster - every 5 seconds)
            setTimeout(startBotMessages, 2000);
            
            // Initialize audio context on first user interaction
            document.addEventListener('click', initializeAudioContext, { once: true });
        });
        
        // Initialize Audio Context
        function initializeAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                // Play a startup sound
                if (soundEnabled) {
                    setTimeout(() => playStartupSound(), 100);
                }
            }
        }
        
        // ========== FUTURISTIC SOUND FUNCTIONS ==========
        
        // Play Message Notification Sound (Very short, futuristic)
        function playMessageSound(type = 'notification') {
            if (!soundEnabled || !audioContext) return;
            
            try {
                // Create oscillator for the main tone
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // Connect nodes
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Different sounds for different message types
                if (type === 'user') {
                    // Short, ascending tone for user messages
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.08);
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.08);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.08);
                    
                } else if (type === 'bot') {
                    // Short, descending tone for bot messages
                    oscillator.type = 'triangle';
                    oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.1);
                    
                    // Add a slight modulation for futuristic feel
                    const modulator = audioContext.createOscillator();
                    const modulatorGain = audioContext.createGain();
                    
                    modulator.type = 'sine';
                    modulator.frequency.setValueAtTime(30, audioContext.currentTime);
                    modulatorGain.gain.setValueAtTime(50, audioContext.currentTime);
                    
                    modulator.connect(modulatorGain);
                    modulatorGain.connect(oscillator.frequency);
                    
                    gainNode.gain.setValueAtTime(0.08, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    modulator.start(audioContext.currentTime);
                    oscillator.start(audioContext.currentTime);
                    
                    modulator.stop(audioContext.currentTime + 0.1);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    
                } else if (type === 'ping') {
                    // Very short, high-tech ping sound
                    oscillator.type = 'sine';
                    
                    // Create a quick ping with decay
                    const now = audioContext.currentTime;
                    oscillator.frequency.setValueAtTime(1500, now);
                    oscillator.frequency.exponentialRampToValueAtTime(800, now + 0.05);
                    
                    gainNode.gain.setValueAtTime(0.15, now);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                    
                    oscillator.start(now);
                    oscillator.stop(now + 0.05);
                    
                } else if (type === 'connect') {
                    // Connection established sound
                    oscillator.type = 'sawtooth';
                    
                    const now = audioContext.currentTime;
                    oscillator.frequency.setValueAtTime(200, now);
                    oscillator.frequency.linearRampToValueAtTime(800, now + 0.15);
                    
                    gainNode.gain.setValueAtTime(0.05, now);
                    gainNode.gain.linearRampToValueAtTime(0.1, now + 0.05);
                    gainNode.gain.exponentialRampToValueAtTime(0.001, now + 0.15);
                    
                    oscillator.start(now);
                    oscillator.stop(now + 0.15);
                    
                } else {
                    // Default notification sound
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
                    
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.06);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.06);
                }
                
                // Show sound wave animation
                showSoundWave();
                
            } catch (error) {
                console.log("Audio error:", error);
                // Silently fail - audio is not critical
            }
        }
        
        // Play Key Press Sound (ultra short)
        function playKeySound() {
            if (!soundEnabled || !audioContext) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                
                gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.03);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.03);
                
            } catch (error) {
                // Silently fail
            }
        }
        
        // Play Startup Sound
        function playStartupSound() {
            if (!soundEnabled || !audioContext) return;
            
            try {
                // Create a short startup sequence
                const now = audioContext.currentTime;
                
                // First beep
                const osc1 = audioContext.createOscillator();
                const gain1 = audioContext.createGain();
                osc1.connect(gain1);
                gain1.connect(audioContext.destination);
                
                osc1.type = 'sine';
                osc1.frequency.setValueAtTime(800, now);
                gain1.gain.setValueAtTime(0.1, now);
                gain1.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                
                // Second beep
                const osc2 = audioContext.createOscillator();
                const gain2 = audioContext.createGain();
                osc2.connect(gain2);
                gain2.connect(audioContext.destination);
                
                osc2.type = 'sine';
                osc2.frequency.setValueAtTime(1200, now + 0.06);
                gain2.gain.setValueAtTime(0.08, now + 0.06);
                gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.11);
                
                osc1.start(now);
                osc1.stop(now + 0.05);
                
                osc2.start(now + 0.06);
                osc2.stop(now + 0.11);
                
                showSoundWave();
                
            } catch (error) {
                // Silently fail
            }
        }
        
        // Show Sound Wave Animation
        function showSoundWave() {
            if (!soundWaveElement) return;
            
            soundWaveElement.classList.add('active');
            
            // Hide after animation
            setTimeout(() => {
                soundWaveElement.classList.remove('active');
            }, 500);
        }
        
        // Initialize Vertical Color Bar
        function initializeVerticalColorBar() {
            const verticalBar = document.getElementById('verticalColorBar');
            
            colorConfig.forEach(color => {
                const segment = document.createElement('div');
                segment.className = 'color-segment';
                segment.id = `segment-${color.id}`;
                segment.style.backgroundColor = color.hex;
                verticalBar.appendChild(segment);
            });
        }
        
        // Initialize Node Grid
        function initializeNodeGrid() {
            const nodeGrid = document.getElementById('nodeGrid');
            
            colorConfig.forEach(color => {
                const nodeOption = document.createElement('div');
                nodeOption.className = 'node-option';
                if (color.id === userNodeColor) {
                    nodeOption.classList.add('selected');
                }
                nodeOption.style.backgroundColor = color.hex;
                nodeOption.dataset.color = color.id;
                nodeOption.innerHTML = `
                    ${color.id.charAt(0).toUpperCase()}
                    <div class="node-label">${color.name}</div>
                `;
                
                nodeOption.addEventListener('click', function() {
                    selectNode(this.dataset.color);
                    if (soundEnabled) playMessageSound('connect');
                });
                
                nodeGrid.appendChild(nodeOption);
            });
        }
        
        // Select Node
        function selectNode(color) {
            userNodeColor = color;
            userNodeName = colorConfig.find(c => c.id === color).name + ' EXPLORER';
            
            // Update UI
            document.querySelectorAll('.node-option').forEach(node => {
                node.classList.remove('selected');
            });
            document.querySelector(`.node-option[data-color="${color}"]`).classList.add('selected');
        }
        
        // Confirm Node Selection
        function confirmNodeSelection() {
            const pingScreen = document.getElementById('pingStartupScreen');
            const chatInterface = document.getElementById('chatInterface');
            
            // Play connection sound
            if (soundEnabled) playMessageSound('connect');
            
            // Update user node display
            document.getElementById('currentUserNode').textContent = 
                colorConfig.find(c => c.id === userNodeColor).name;
            
            // Transition to chat interface
            pingScreen.style.opacity = '0';
            setTimeout(() => {
                pingScreen.style.display = 'none';
                chatInterface.style.opacity = '1';
                
                // Add welcome messages (3X faster)
                setTimeout(() => {
                    addBotMessage('SYSTEM', `WELCOME TO IPNOTEC NETWORK, ${userNodeName}`, 'cyan');
                    setTimeout(() => {
                        addBotMessage('QUANTUM-X', 'THE FUTURE BELONGS TO THOSE WHO CODE REALITY', 'violet');
                        setTimeout(() => {
                            addBotMessage('IPNOTEC', 'ENTERING PHONELESS, KEYLESS, PAPERLESS ECOSYSTEM PROTOCOL', 'orange');
                        }, 500);
                    }, 300);
                }, 200);
            }, 500);
        }
        
        // Start Vertical Bar Animation (3X faster)
        function startVerticalBarAnimation() {
            clearInterval(verticalBarAnimation);
            
            if (!animationsEnabled) return;
            
            verticalBarAnimation = setInterval(() => {
                // Deactivate all segments
                document.querySelectorAll('.color-segment').forEach(segment => {
                    segment.classList.remove('active');
                });
                
                // Activate current segment
                const segment = document.getElementById(`segment-${colorConfig[currentColorIndex].id}`);
                if (segment) {
                    segment.classList.add('active');
                }
                
                // Update top color strip with orange as base
                updateTopColorStrip(colorConfig[6].hex); // Orange
                
                // Move to next color
                currentColorIndex = (currentColorIndex + 1) % colorConfig.length;
            }, 167); // 3X faster: 500ms -> ~167ms
        }
        
        // Update Top Color Strip
        function updateTopColorStrip(colorHex) {
            const topStrip = document.getElementById('topColorStrip');
            topStrip.style.backgroundColor = colorHex;
            topStrip.style.boxShadow = `0 0 15px ${colorHex}`;
        }
        
        // Toggle Keypad Lighting
        function toggleKeypadLighting() {
            keypadLighting = !keypadLighting;
            const button = document.getElementById('toggleKeypadLighting');
            
            if (keypadLighting) {
                button.classList.add('active');
                button.textContent = 'KEYLIGHTS ON';
                if (soundEnabled) playMessageSound('connect');
                // If there's a last sender, light that key
                if (lastSenderKey && lastSenderColor) {
                    lightSpecificKey(lastSenderKey, lastSenderColor);
                }
            } else {
                button.classList.remove('active');
                button.textContent = 'KEYLIGHTS OFF';
                document.querySelectorAll('.key').forEach(key => {
                    key.classList.remove('lit');
                    key.style.color = '';
                    key.style.borderColor = '';
                    key.style.boxShadow = '';
                });
            }
        }
        
        // Light Specific Key Based on Sender
        function lightSpecificKey(keyLetter, colorName) {
            if (!keypadLighting) return;
            
            // Turn off all keys first
            document.querySelectorAll('.key').forEach(key => {
                key.classList.remove('lit');
                key.style.color = '';
                key.style.borderColor = '';
                key.style.boxShadow = '';
            });
            
            // Find the color hex
            const color = colorConfig.find(c => c.id === colorName);
            if (!color) return;
            
            // Find and light the specific key
            const keyElement = document.querySelector(`.key-${keyLetter.toLowerCase()}`);
            if (keyElement) {
                keyElement.classList.add('lit');
                keyElement.style.color = color.hex;
                keyElement.style.borderColor = color.hex;
                keyElement.style.boxShadow = `0 0 10px ${color.hex}`;
            }
            
            // Update edge indicator
            const edgeIndicator = document.getElementById('edgeIndicator');
            edgeIndicator.style.backgroundColor = color.hex;
            edgeIndicator.style.opacity = '1';
            
            // Turn off edge indicator after 2 seconds (3X faster)
            setTimeout(() => {
                edgeIndicator.style.opacity = '0';
            }, 2000);
        }
        
        // Toggle Animation
        function toggleAnimation() {
            animationsEnabled = !animationsEnabled;
            const button = document.getElementById('toggleAnimation');
            
            if (animationsEnabled) {
                button.classList.add('active');
                button.textContent = 'ANIMATION ON';
                if (soundEnabled) playMessageSound('connect');
                startVerticalBarAnimation();
            } else {
                button.classList.remove('active');
                button.textContent = 'ANIMATION OFF';
                clearInterval(verticalBarAnimation);
                document.querySelectorAll('.color-segment').forEach(segment => {
                    segment.classList.remove('active');
                });
            }
        }
        
        // Toggle Sound
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const button = document.getElementById('toggleSound');
            
            if (soundEnabled) {
                button.classList.add('active');
                button.textContent = 'SOUND ON';
                
                // Initialize audio context if not already done
                initializeAudioContext();
                
                // Play a sound to indicate sound is on
                setTimeout(() => {
                    if (audioContext && audioContext.state === 'running') {
                        playMessageSound('ping');
                    }
                }, 100);
            } else {
                button.classList.remove('active');
                button.textContent = 'SOUND OFF';
            }
        }
        
        // Handle Keypad Clicks
        function handleKeypadClick(e) {
            const key = e.currentTarget;
            const keyText = key.textContent.trim();
            const input = document.getElementById('messageInput');
            
            if (key.classList.contains('key-backspace')) {
                input.value = input.value.slice(0, -1);
            } else if (key.classList.contains('key-space')) {
                input.value += ' ';
            } else if (key.classList.contains('key-enter')) {
                sendMessage();
            } else if (key.classList.contains('special')) {
                // Handle special keys
                if (keyText === 'SHIFT') {
                    // Shift - not implemented
                } else if (keyText === '?123') {
                    // Symbols - not implemented
                } else if (keyText === ',') {
                    input.value += ',';
                } else if (keyText === '.') {
                    input.value += '.';
                }
            } else {
                input.value += keyText;
            }
            
            input.focus();
        }
        
        // Send Message (3X faster response)
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // Bot response after shorter delay (3X faster)
                setTimeout(() => {
                    const randomBot = networkParticipants[Math.floor(Math.random() * networkParticipants.length)];
                    const response = generateBotResponse(message);
                    addBotMessage(randomBot.name.toUpperCase(), response, randomBot.color);
                }, 333); // 3X faster: 1000ms -> ~333ms
            }
        }
        
        // Add User Message
        function addUserMessage(text) {
            messageCount++;
            const messagesContainer = document.getElementById('chatMessages');
            const userColor = colorConfig.find(c => c.id === userNodeColor);
            
            // Limit messages for performance
            if (messageCount > 50) {
                const firstMessage = messagesContainer.querySelector('.message');
                if (firstMessage) firstMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-sender">
                        <span class="sender-color" style="background-color: ${userColor.hex};"></span>
                        YOU (${userNodeName})
                    </div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
                <div>${text}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Play user message sound
            if (soundEnabled) playMessageSound('user');
            
            // Trigger visual effects
            triggerColorEffects(userNodeColor);
        }
        
        // Add Bot Message (3X faster animation)
        function addBotMessage(sender, text, color) {
            messageCount++;
            const messagesContainer = document.getElementById('chatMessages');
            const colorObj = colorConfig.find(c => c.id === color) || colorConfig[0];
            
            // Limit messages for performance
            if (messageCount > 50) {
                const firstMessage = messagesContainer.querySelector('.message');
                if (firstMessage) firstMessage.remove();
            }
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            messageDiv.innerHTML = `
                <div class="message-header">
                    <div class="message-sender">
                        <span class="sender-color" style="background-color: ${colorObj.hex};"></span>
                        ${sender}
                    </div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
                <div>${text}</div>
            `;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Play bot message sound
            if (soundEnabled) playMessageSound('bot');
            
            // Store last sender info for key lighting
            lastSenderKey = sender.charAt(0).toLowerCase();
            lastSenderColor = color;
            
            // Trigger key lighting if enabled
            if (keypadLighting) {
                lightSpecificKey(lastSenderKey, lastSenderColor);
            }
            
            // Trigger visual effects
            triggerColorEffects(color);
        }
        
        // Trigger Color Effects (3X faster)
        function triggerColorEffects(color) {
            // Update vertical color bar
            activateColorSegment(color);
            
            // Trigger frame glow
            triggerFrameGlow(color);
        }
        
        // Activate Color Segment in Vertical Bar
        function activateColorSegment(color) {
            // Deactivate all segments first
            document.querySelectorAll('.color-segment').forEach(segment => {
                segment.classList.remove('active');
            });
            
            // Activate the target segment
            const segment = document.getElementById(`segment-${color}`);
            if (segment) {
                segment.classList.add('active');
                
                // Deactivate after shorter time (3X faster)
                setTimeout(() => {
                    segment.classList.remove('active');
                }, 1000);
            }
        }
        
        // Trigger Frame Glow (3X faster)
        function triggerFrameGlow(color) {
            const frameGlow = document.getElementById('frameGlow');
            const colorObj = colorConfig.find(c => c.id === color) || colorConfig[0];
            const colorHex = colorObj.hex;
            
            // Clear any existing glow animation
            if (activeFrameGlow) {
                clearTimeout(activeFrameGlow);
                frameGlow.style.opacity = '0';
            }
            
            // Apply new glow
            frameGlow.style.background = `radial-gradient(circle at center, ${colorHex}20, transparent 70%)`;
            frameGlow.style.boxShadow = `0 0 30px ${colorHex}80, inset 0 0 30px ${colorHex}40`;
            frameGlow.style.opacity = '1';
            
            // Remove glow after shorter time (3X faster)
            activeFrameGlow = setTimeout(() => {
                frameGlow.style.opacity = '0';
                activeFrameGlow = null;
            }, 333); // 3X faster: 1000ms -> ~333ms
        }
        
        // Start Bot Messages (3X faster - every 5 seconds)
        function startBotMessages() {
            setInterval(() => {
                const randomBot = networkParticipants[Math.floor(Math.random() * networkParticipants.length)];
                const randomTopic = ipnotecTopics[Math.floor(Math.random() * ipnotecTopics.length)];
                addBotMessage(randomBot.name.toUpperCase(), randomTopic, randomBot.color);
            }, 5000); // 3X faster: 15000ms -> 5000ms
        }
        
        // Generate Bot Response
        function generateBotResponse(userMessage) {
            const upperMessage = userMessage.toUpperCase();
            
            // Check for IPNOTEC-related keywords
            if (upperMessage.includes('IPNOTEC') || upperMessage.includes('VISION')) {
                return "IPNOTEC is building the organization of the future: phoneless, keyless, paperless society with seamless neural integration.";
            } else if (upperMessage.includes('WATCH') || upperMessage.includes('WEARABLE')) {
                return "IPNOTEC WATCH uses BB QNX military-grade security with neural interfaces projecting holographic displays to your retina. No phone needed.";
            } else if (upperMessage.includes('PHONELESS') || upperMessage.includes('ECOSYSTEM')) {
                return "The phoneless ecosystem eliminates device dependency. Communication happens through neural interfaces and holographic projections.";
            } else if (upperMessage.includes('KEYLESS') || upperMessage.includes('SECURITY')) {
                return "Keyless society uses biometric blockchain authentication. Your biological signature is your universal key to everything.";
            } else if (upperMessage.includes('PAPERLESS') || upperMessage.includes('DOCUMENT')) {
                return "Paperless world means all documents are secured on quantum-resistant blockchain with holographic display capabilities.";
            } else if (upperMessage.includes('QNX') || upperMessage.includes('MILITARY')) {
                return "BB QNX provides military-grade security for @ipnotec.vip accounts and the entire IPNOTEC ecosystem infrastructure.";
            } else if (upperMessage.includes('STUDIOS') || upperMessage.includes('MUSIC')) {
                return "IPNOTEC STUDIOS creates adaptive music and entertainment that changes based on your biometrics and neural patterns.";
            } else if (upperMessage.includes('INTERNSHIP') || upperMessage.includes('YOUNG')) {
                return "IPNOTEC internships awaken the young generation to purposeful living through technology that serves humanity.";
            } else if (upperMessage.includes('FUTURE') || upperMessage.includes('ORGANIZATION')) {
                return "IPNOTEC represents the organization of the future - merging consciousness, creativity and cutting-edge technology for human advancement.";
            }
            
            // Default responses
            const responses = [
                "The IPNOTEC network processes your query through quantum algorithms. Result: affirmative.",
                "Neural analysis confirms alignment with IPNOTEC future vision. Proceed with implementation.",
                "Your input resonates at optimal frequency for innovation. The ecosystem adapts accordingly.",
                "Quantum entanglement patterns detected in your message. The future is already responding.",
                "IPNOTEC AI networks are processing millions of similar queries worldwide. You're not alone.",
                "Phoneless, keyless, paperless protocol activated. Your query integrates with IPNOTEC vision.",
                "BB QNX security verification passed. Message received by IPNOTEC neural network.",
                "Adaptive response generated based on your biometric reading and neural patterns."
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        // Get Current Time
        function getCurrentTime() {
            const now = new Date();
            return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        }
        
        // Send Ping
        function sendPing() {
            // Play ping sound
            if (soundEnabled) playMessageSound('ping');
            
            addBotMessage('SYSTEM', 'PING SENT TO ALL NODES - RESPONSE RECEIVED IN 0.3ms', 'cyan');
            triggerColorEffects('cyan');
        }
        
        // Clear Chat
        function clearChat() {
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '';
            messageCount = 0;
            addBotMessage('SYSTEM', 'CHAT LOG CLEARED - IPNOTEC NETWORK ACTIVE', 'cyan');
        }
        
        // Randomize Colors
        function randomizeColors() {
            const randomColor = colorConfig[Math.floor(Math.random() * colorConfig.length)];
            userNodeColor = randomColor.id;
            userNodeName = randomColor.name + ' EXPLORER';
            
            // Update display
            document.getElementById('currentUserNode').textContent = randomColor.name;
            
            addBotMessage('SYSTEM', `NODE COLOR RANDOMIZED TO ${randomColor.name} - NEURAL SYNC COMPLETE`, randomColor.id);
            triggerColorEffects(randomColor.id);
        }
    </script>
</body>
</html>
